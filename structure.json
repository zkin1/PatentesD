{
  "src": {
    "css": {
      "index.css": "    .search-wrap {\r\n    text-align: center;\r\n    margin-top: 2rem;\r\n    }\r\n    .search-wrap h2 {\r\n    font-size: 2.1rem;\r\n    font-weight: 600;\r\n    color: #151111;\r\n    margin-bottom: 1.5rem;\r\n    }\r\n    .search-form {\r\n    max-width: 400px;\r\n    margin: 0 auto;\r\n    }\r\n    .input-wrap {\r\n        position: relative;\r\n        margin-bottom: 2rem;\r\n        display: flex;\r\n        justify-content: center;\r\n        }\r\n    .input-field {\r\n        position: absolute;\r\n        width: 100%;\r\n        height: 100%;\r\n        background: none;\r\n        border: none;\r\n        outline: none;\r\n        border-bottom: 1px solid #bbb;\r\n        padding: 0;\r\n        font-size: 0.95rem;\r\n        color: #151111;\r\n        transition: 0.4s;\r\n    }\r\n    .input-field.active {\r\n    border-bottom-color: #151111;\r\n    }   \r\n    .search-btn {\r\n        display: inline-block;\r\n        width: 100%;\r\n        height: 43px;\r\n        background-color: #151111;\r\n        color: #fff;\r\n        border: none;\r\n        cursor: pointer;\r\n        border-radius: 0.8rem;\r\n        font-size: 0.8rem;\r\n        margin-bottom: 2rem;\r\n        transition: 0.3s;\r\n    }\r\n    .search-btn:hover {\r\n    background-color: #8371fd;\r\n    }\r\n    /* Estilos responsive */\r\n    @media (max-width: 768px) {\r\n    .box {\r\n    border-radius: 2rem;\r\n    padding: 1rem;\r\n    }\r\n    .search-wrap h2 {\r\n    font-size: 2.1;\r\n    }\r\n    .search-form {\r\n    max-width: 100%;\r\n    }\r\n    }",
      "nav.css": ".navbar {\r\n  background-color: #fff;\r\n  border-radius: 3.3rem;\r\n  box-shadow: 0 60px 40px -30px rgba(0, 0, 0, 0.27);\r\n  padding: 1rem;\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  position: sticky;\r\n  top: 0;\r\n  z-index: 100;\r\n}\r\n\r\n.navbar-brand {\r\n  color: #151111;\r\n  font-size: 1.5rem;\r\n  font-weight: bold;\r\n  text-decoration: none;\r\n}\r\n\r\n.navbar-toggler {\r\n  display: none;\r\n  border: none;\r\n  background-color: transparent;\r\n  cursor: pointer;\r\n}\r\n\r\n.navbar-toggler-icon {\r\n  display: block;\r\n  width: 25px;\r\n  height: 3px;\r\n  background-color: #151111;\r\n  margin: 5px 0;\r\n}\r\n\r\n.navbar-nav {\r\n  display: flex;\r\n  list-style: none;\r\n  margin: 0;\r\n  padding: 0;\r\n}\r\n\r\n.nav-item {\r\n  margin-left: 1rem;\r\n}\r\n\r\n.nav-link {\r\n  color: #151111;\r\n  text-decoration: none;\r\n  transition: color 0.3s ease;\r\n}\r\n\r\n.nav-link:hover {\r\n  color: #8371fd;\r\n}\r\n\r\nscan {\r\n  color: yellow;\r\n}\r\n\r\n@media (max-width: 768px) {\r\n  .navbar {\r\n    border-radius: 2rem;\r\n    padding: 1rem 1rem 1rem 1.5rem; \r\n    position: relative; \r\n  }\r\n\r\n  .navbar-brand {\r\n    flex-grow: 1;\r\n  }\r\n\r\n  .navbar-toggler {\r\n    display: block;\r\n    position: absolute;\r\n    top: 1rem;\r\n    right: 0;\r\n    padding: 0.5rem 1rem;\r\n    z-index: 1001; \r\n  }\r\n\r\n\r\n  .navbar-nav {\r\n    display: none;\r\n    flex-direction: column;\r\n    width: 100%;\r\n    background-color: #fff;\r\n    padding: 1rem;\r\n    position: absolute;\r\n    top: 100%;\r\n    left: 0;\r\n    border-radius: 0 0 2rem 2rem;\r\n    box-shadow: 0 60px 40px -30px rgba(0, 0, 0, 0.27);\r\n  }\r\n\r\n  .navbar-nav.active {\r\n    display: flex;\r\n  }\r\n\r\n  .nav-item {\r\n    margin: 0.5rem 0;\r\n  }\r\n}",
      "recuperar-password.css": ".recuperar-password-form {\r\n    max-width: 300px;\r\n    margin: 0 auto;\r\n  }\r\n  \r\n  .recuperar-password-form .input-wrap {\r\n    margin-bottom: 1rem;\r\n  }\r\n  \r\n  .recuperar-password-form .sign-btn {\r\n    margin-top: 1rem;\r\n  }\r\n  \r\n  #codigo-verification,\r\n  #nueva-password {\r\n    margin-top: 1rem;\r\n  }\r\n  \r\n  #mensaje {\r\n    margin-bottom: 1rem;\r\n    padding: 0.5rem;\r\n    border-radius: 4px;\r\n    text-align: center;\r\n  }\r\n  \r\n  .mensaje.success {\r\n    background-color: #d4edda;\r\n    color: #155724;\r\n    border: 1px solid #c3e6cb;\r\n  }\r\n  \r\n  .mensaje.error {\r\n    background-color: #f8d7da;\r\n    color: #721c24;\r\n    border: 1px solid #f5c6cb;\r\n  }",
      "style.css": "@import url(\"https://fonts.googleapis.com/css2?family=Poppins:wght@200;300;400;500;600;700;800&display=swap\");\r\n\r\n*,\r\n*::before,\r\n*::after {\r\n  padding: 0;\r\n  margin: 0;\r\n  box-sizing: border-box;\r\n}\r\n\r\nbody,\r\ninput {\r\n  font-family: \"Poppins\", sans-serif;\r\n}\r\n\r\nhtml {\r\n  min-height: 100%;\r\n  position: relative;\r\n}\r\n\r\nmain {\r\n  width: 100%;\r\n  min-height: 100vh;\r\n  overflow: hidden;\r\n  background-color: #3498DB;\r\n  padding: 2rem;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n}\r\n\r\n.box {\r\n  position: relative;\r\n  width: 100%;\r\n  max-width: 510px;\r\n  height: 640px;\r\n  background-color: #fff;\r\n  border-radius: 3.3rem;\r\n  box-shadow: 0 60px 40px -30px rgba(0, 0, 0, 0.27);\r\n}\r\n\r\n.inner-box {\r\n  position: absolute;\r\n  width: 40%;\r\n  height: 90%;\r\n  top: 50%;\r\n  left: 48%;\r\n  transform: translate(-50%, -50%);\r\n}\r\n\r\n.forms-wrap {\r\n  position: absolute;\r\n  height: 100%;\r\n  width: 45%;\r\n  top: 0;\r\n  left: 0;\r\n  display: grid;\r\n  grid-template-columns: 1fr;\r\n  grid-template-rows: 1fr;\r\n  transition: 0.8s ease-in-out;\r\n}\r\n\r\nform {\r\n  max-width: 260px;\r\n  width: 100%;\r\n  margin: 0 auto;\r\n  height: 100%;\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: space-evenly;\r\n  grid-column: 1 / 2;\r\n  grid-row: 1 / 2;\r\n  transition: opacity 0.02s 0.4s;\r\n}\r\n\r\nform.sign-up-form {\r\n  opacity: 0;\r\n  pointer-events: none;\r\n}\r\n\r\n.logo {\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n\r\n.logo img {\r\n  width: 27px;\r\n  margin-right: 0.3rem;\r\n}\r\n\r\n.logo h4 {\r\n  font-size: 1.1rem;\r\n  margin-top: -9px;\r\n  letter-spacing: -0.5px;\r\n  color: #151111;\r\n}\r\n\r\n.heading h2 {\r\n  text-align: center;\r\n  font-size: 2.1rem;\r\n  font-weight: 600;\r\n  color: #151111;\r\n}\r\nh3{\r\n  font-size: 90%;\r\n  font-weight: 400;\r\n  color: #818181;\r\n}\r\n\r\n.heading h6 {\r\n  text-align: center;\r\n  color: #bababa;\r\n  font-weight: 400;\r\n  font-size: 0.75rem;\r\n  display: inline;\r\n}\r\n\r\n.toggle {\r\n  color: #151111;\r\n  text-decoration: none;\r\n  font-size: 0.75rem;\r\n  font-weight: 500;\r\n  transition: 0.3s;\r\n}\r\n\r\n.toggle:hover {\r\n  color: #8371fd;\r\n}\r\n\r\n.input-wrap {\r\n  position: relative;\r\n  height: 37px;\r\n  margin-bottom: 2rem;\r\n}\r\n\r\n.input-field {\r\n  position: absolute;\r\n  width: 100%;\r\n  height: 100%;\r\n  background: none;\r\n  border: none;\r\n  outline: none;\r\n  border-bottom: 1px solid #bbb;\r\n  padding: 0;\r\n  font-size: 0.95rem;\r\n  color: #151111;\r\n  transition: 0.4s;\r\n}\r\n\r\nlabel {\r\n  position: absolute;\r\n  left: 0;\r\n  top: 50%;\r\n  transform: translateY(-50%);\r\n  font-size: 0.95rem;\r\n  color: #bbb;\r\n  pointer-events: none;\r\n  transition: 0.4s;\r\n}\r\n\r\n.input-field.active {\r\n  border-bottom-color: #151111;\r\n}\r\n\r\n.input-field.active + label {\r\n  font-size: 0.75rem;\r\n  top: -2px;\r\n}\r\n\r\n.sign-btn {\r\n  display: inline-block;\r\n  width: 100%;\r\n  height: 43px;\r\n  background-color: #151111;\r\n  color: #fff;\r\n  border: none;\r\n  cursor: pointer;\r\n  border-radius: 0.8rem;\r\n  font-size: 0.8rem;\r\n  margin-bottom: 2rem;\r\n  transition: 0.3s;\r\n}\r\n\r\n.sign-btn:hover {\r\n  background-color: #8371fd;\r\n}\r\n\r\n.text {\r\n  color: #bbb;\r\n  font-size: 0.7rem;\r\n}\r\n\r\n.text a {\r\n  color: #bbb;\r\n  transition: 0.3s;\r\n}\r\n\r\n.text a:hover {\r\n  color: #8371fd;\r\n}\r\n\r\nmain.sign-up-mode form.sign-in-form {\r\n  opacity: 0;\r\n  pointer-events: none;\r\n}\r\n\r\nmain.sign-up-mode form.sign-up-form {\r\n  opacity: 1;\r\n  pointer-events: all;\r\n}\r\n\r\nmain.sign-up-mode .forms-wrap {\r\n  left: 55%;\r\n}\r\n\r\n@media (max-width: 850px) {\r\n  .box {\r\n    height: auto;\r\n    max-width: 550px;\r\n    overflow: hidden;\r\n  }\r\n\r\n  .inner-box {\r\n    position: static;\r\n    transform: none;\r\n    width: revert;\r\n    height: revert;\r\n    padding: 2rem;\r\n  }\r\n\r\n  .forms-wrap {\r\n    position: revert;\r\n    width: 100%;\r\n    height: auto;\r\n  }\r\n\r\n  form {\r\n    max-width: revert;\r\n    padding: 1.5rem 2.5rem 2rem;\r\n    transition: transform 0.8s ease-in-out, opacity 0.45s linear;\r\n  }\r\n\r\n  .heading {\r\n    margin: 2rem 0;\r\n  }\r\n\r\n  form.sign-up-form {\r\n    transform: translateX(100%);\r\n  }\r\n\r\n  main.sign-up-mode form.sign-in-form {\r\n    transform: translateX(-100%);\r\n  }\r\n\r\n  main.sign-up-mode form.sign-up-form {\r\n    transform: translateX(0%);\r\n  }\r\n}\r\n\r\n@media (max-width: 530px) {\r\n  main {\r\n    padding: 1rem;\r\n  }\r\n\r\n  .box {\r\n    border-radius: 2rem;\r\n  }\r\n\r\n  .inner-box {\r\n    padding: 1rem;\r\n  }\r\n\r\n  form {\r\n    padding: 1rem 2rem 1.5rem;\r\n  }\r\n}\r\n\r\nscan{\r\n    color: yellow;\r\n}\r\n\r\n.footer {\r\n  flex-shrink: 0;\r\n  background-color: #f8f9fa;\r\n  padding: 20px 0;\r\n  text-align: center;\r\n  position: absolute;\r\n  bottom: 0;\r\n  width: 100%;\r\n  height: 40px;\r\n  border-top: 1px solid #e7e7e7;\r\n}\r\n\r\n.footer-content {\r\n  max-width: 800px;\r\n  margin: 0 auto;\r\n  padding: 0 20px;\r\n}\r\n\r\n.footer p {\r\n  margin: 0;\r\n  color: #6c757d;\r\n  font-size: 14px;\r\n}\r\n\r\n.mensaje {\r\n  position: fixed;\r\n  top: 20px;\r\n  left: 50%;\r\n  transform: translateX(-50%);\r\n  padding: 10px 20px;\r\n  border-radius: 5px;\r\n  font-weight: bold;\r\n  z-index: 1000;\r\n  transition: opacity 0.5s ease-in-out;\r\n}\r\n\r\n.mensaje.success {\r\n  background-color: #4CAF50;\r\n  color: white;\r\n}\r\n\r\n.mensaje.error {\r\n  background-color: #f44336;\r\n  color: white;\r\n}\r\n\r\n.success {\r\n  background-color: #d4edda;\r\n  color: #155724;\r\n  border: 1px solid #c3e6cb;\r\n}\r\n\r\n.error {\r\n  background-color: #f8d7da;\r\n  color: #721c24;\r\n  border: 1px solid #f5c6cb;\r\n}"
    },
    "html": {
      "index.html": "<!DOCTYPE html>\r\n<html lang=\"en\">\r\n<head>\r\n    <meta charset=\"UTF-8\">\r\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n    <link rel=\"stylesheet\" href=\"/css/style.css\">\r\n    <link rel=\"stylesheet\" href=\"/css/index.css\">\r\n    <link rel=\"stylesheet\" href=\"/css/nav.css\">\r\n    <link rel=\"stylesheet\" href=\"https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.7.0/animate.min.css\">\r\n    <link href=\"https://fonts.googleapis.com/css?family=Quicksand\" rel=\"stylesheet\">\r\n    <link rel=\"stylesheet\" href=\"https://use.fontawesome.com/releases/v5.8.1/css/all.css\" integrity=\"sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf\" crossorigin=\"anonymous\">\r\n    <title>Patentes Duoc UC</title>\r\n</head>\r\n<body>\r\n  <nav class=\"navbar\">\r\n    <div class=\"container\">\r\n      <a class=\"navbar-brand\" href=\"#\">Patentes Duoc <scan>UC</scan></a>\r\n      <button class=\"navbar-toggler\" id=\"navbar-toggler\">\r\n        <span class=\"navbar-toggler-icon\"></span>\r\n        <span class=\"navbar-toggler-icon\"></span>\r\n        <span class=\"navbar-toggler-icon\"></span>\r\n      </button>\r\n      <ul class=\"navbar-nav\" id=\"navbar-nav\">\r\n        <li class=\"nav-item\">\r\n          <a class=\"nav-link\" href=\"index.html\" id=\"comics-link\">Buscar por patente</a>\r\n        </li>\r\n        <li class=\"nav-item\">\r\n          <a class=\"nav-link\" href=\"login.html\" id=\"login-link\"><i class='bx bx-user'></i> Iniciar sesión</a>\r\n        </li>\r\n        <li class=\"nav-item\">\r\n          <a class=\"nav-link\" href=\"register.html\" id=\"registro-link\"><i class='bx bx-user-plus'></i> Registrarse</a>\r\n        </li>\r\n        <li class=\"nav-item\" id=\"user-info\" style=\"display: none;\">\r\n          <span class=\"nav-link\">Bienvenido, <span id=\"username-display\"></span></span>\r\n        </li>\r\n        <li class=\"nav-item\" id=\"logout-link\" style=\"display: none;\">\r\n          <a class=\"nav-link\" href=\"#\" onclick=\"logout()\"><i class='bx bx-log-out'></i> Cerrar sesión</a>\r\n        </li>\r\n      </ul>\r\n    </div>\r\n  </nav>\r\n  <main>\r\n    <div class=\"box\">\r\n      <div class=\"inner-box\">\r\n        <div id=\"mensaje\" class=\"mensaje\" style=\"display: none;\"></div>\r\n        <div class=\"search-wrap\">\r\n          <h2>Buscar Patente</h2>\r\n          <h3>Ejemplo: BBBB10</h3>\r\n          <form action=\"\" autocomplete=\"off\" class=\"search-form\">\r\n            <div class=\"input-wrap\">\r\n              <input\r\n              type=\"text\"\r\n              id=\"patente-input\"\r\n              class=\"input-field\"\r\n              autocomplete=\"off\"\r\n              required\r\n              placeholder=\"Ingrese la patente\"\r\n              oninput=\"this.value = this.value.toUpperCase()\"\r\n            />\r\n            </div>\r\n            <input type=\"submit\" value=\"Buscar\" class=\"search-btn\" />\r\n          </form>\r\n          <div id=\"not-logged-in-message\" class=\"alert\" style=\"display: none;\">\r\n            <p>Debe iniciar sesión para buscar por patente.</p>\r\n          </div>\r\n          <div id=\"search-results\" class=\"search-results\" style=\"display: none;\"></div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </main>\r\n\r\n  <footer class=\"footer\">\r\n    <div class=\"footer-content\">\r\n      <p>Este es un pequeño proyecto que intenta minimizar los incidentes en los estacionamientos de Duoc Plaza Norte.</p>\r\n    </div>\r\n  </footer>\r\n\r\n  <script src=\"/js/script.js\"></script>\r\n  \r\n</body>\r\n</html>",
      "login.html": "<!DOCTYPE html>\r\n<html lang=\"en\">\r\n<head>\r\n    <meta charset=\"UTF-8\">\r\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n    <link rel=\"stylesheet\" href=\"/css/style.css\">\r\n    <link rel=\"stylesheet\" href=\"/css/nav.css\">\r\n    <link rel=\"stylesheet\" href=\"https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.7.0/animate.min.css\">\r\n    <link href=\"https://fonts.googleapis.com/css?family=Quicksand\" rel=\"stylesheet\">\r\n    <link rel=\"stylesheet\" href=\"https://use.fontawesome.com/releases/v5.8.1/css/all.css\" integrity=\"sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf\" crossorigin=\"anonymous\">\r\n    <title>Iniciar Sesión</title>\r\n</head>\r\n<body>\r\n  <nav class=\"navbar\">\r\n    <div class=\"container\">\r\n      <a class=\"navbar-brand\" href=\"#\">Patentes Duoc <scan>UC</scan></a>\r\n      <button class=\"navbar-toggler\" id=\"navbar-toggler\">\r\n        <span class=\"navbar-toggler-icon\"></span>\r\n        <span class=\"navbar-toggler-icon\"></span>\r\n        <span class=\"navbar-toggler-icon\"></span>\r\n      </button>\r\n      <ul class=\"navbar-nav\" id=\"navbar-nav\">\r\n        <li class=\"nav-item\">\r\n          <a class=\"nav-link\" href=\"index.html\" id=\"comics-link\">Buscar por patente</a>\r\n        </li>\r\n        <li class=\"nav-item\">\r\n          <a class=\"nav-link\" href=\"login.html\" id=\"login-link\"><i class='bx bx-user'></i> Iniciar sesión</a>\r\n        </li>\r\n        <li class=\"nav-item\">\r\n          <a class=\"nav-link\" href=\"register.html\" id=\"registro-link\"><i class='bx bx-user-plus'></i> Registrarse</a>\r\n        </li>\r\n        <li class=\"nav-item\" id=\"user-info\" style=\"display: none;\">\r\n          <span class=\"nav-link\">Bienvenido, <span id=\"username-display\"></span></span>\r\n        </li>\r\n        <li class=\"nav-item\" id=\"logout-link\" style=\"display: none;\">\r\n          <a class=\"nav-link\" href=\"#\" onclick=\"AppState.logout()\"><i class='bx bx-log-out'></i> Cerrar sesión</a>\r\n        </li>\r\n      </ul>\r\n    </div>\r\n  </nav>\r\n\r\n  <main>\r\n    <div class=\"box\">\r\n      <div class=\"inner-box\">\r\n        <div id=\"mensaje\" class=\"mensaje\" style=\"display: none;\"></div>\r\n        <div class=\"forms-wrap\">\r\n          <form autocomplete=\"off\" class=\"sign-in-form\">\r\n            <div class=\"logo\">\r\n              <h4>Duoc <scan>UC</scan></h4>\r\n            </div>\r\n\r\n            <div class=\"heading\">\r\n              <h2>Inicia sesión</h2>\r\n              <h6>¿Aún no estás registrado?</h6>\r\n              <a href=\"../html/register.html\" class=\"toggle\">Registrarse</a>\r\n            </div>\r\n            <div class=\"actual-form\">\r\n              <div class=\"input-wrap\">\r\n                <input\r\n                  type=\"text\"\r\n                  id=\"login-email\"\r\n                  minlength=\"4\"\r\n                  class=\"input-field\"\r\n                  autocomplete=\"off\"\r\n                  required\r\n                  placeholder=\"Correo Institucional\"\r\n                />\r\n              </div>\r\n\r\n              <div class=\"input-wrap\">\r\n                <input\r\n                  type=\"password\"\r\n                  id=\"login-password\"\r\n                  minlength=\"4\"\r\n                  class=\"input-field\"\r\n                  autocomplete=\"off\"\r\n                  required\r\n                  placeholder=\"Contraseña\"\r\n                />\r\n              </div>\r\n\r\n              <input type=\"submit\" value=\"Iniciar sesión\" class=\"sign-btn\" />\r\n\r\n              <a href=\"../html/recuperar-password.html\" class=\"text\">¿Olvidaste tu contraseña?</a>\r\n            </div>\r\n          </form>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </main>\r\n\r\n  <script src=\"/js/script.js\"></script>\r\n</body>\r\n</html>",
      "recuperar-password.html": "<!DOCTYPE html>\r\n<html lang=\"en\">\r\n<head>\r\n    <meta charset=\"UTF-8\">\r\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n    <link rel=\"stylesheet\" href=\"/css/style.css\">\r\n    <link rel=\"stylesheet\" href=\"/css/nav.css\">\r\n    <link rel=\"stylesheet\" href=\"/src/css/recuperar-password.css\">\r\n    <title>Recuperar Contraseña</title>\r\n</head>\r\n<body>\r\n  <nav class=\"navbar\">\r\n    <div class=\"container\">\r\n      <a class=\"navbar-brand\" href=\"#\">Patentes Duoc <scan>UC</scan></a>\r\n      <button class=\"navbar-toggler\" id=\"navbar-toggler\">\r\n        <span class=\"navbar-toggler-icon\"></span>\r\n        <span class=\"navbar-toggler-icon\"></span>\r\n        <span class=\"navbar-toggler-icon\"></span>\r\n      </button>\r\n      <ul class=\"navbar-nav\" id=\"navbar-nav\">\r\n        <li class=\"nav-item\">\r\n          <a class=\"nav-link\" href=\"index.html\">Buscar por patente</a>\r\n        </li>\r\n        <li class=\"nav-item\">\r\n          <a class=\"nav-link\" href=\"login.html\">Iniciar sesión</a>\r\n        </li>\r\n        <li class=\"nav-item\">\r\n          <a class=\"nav-link\" href=\"register.html\">Registrarse</a>\r\n        </li>\r\n      </ul>\r\n    </div>\r\n  </nav>\r\n\r\n  <main>\r\n    <div class=\"box\">\r\n      <div class=\"inner-box\">\r\n        <div id=\"mensaje\" class=\"mensaje\" style=\"display: none;\"></div>\r\n        <div class=\"forms-wrap\">\r\n          <form autocomplete=\"off\" class=\"recuperar-password-form\">\r\n            <div class=\"logo\">\r\n              <h4>Duoc <scan>UC</scan></h4>\r\n            </div>\r\n\r\n            <div class=\"heading\">\r\n              <h2>Recuperar Contraseña</h2>\r\n            </div>\r\n            <div class=\"actual-form\">\r\n              <div class=\"input-wrap\">\r\n                <input\r\n                  type=\"email\"\r\n                  id=\"recuperar-email\"\r\n                  class=\"input-field\"\r\n                  autocomplete=\"off\"\r\n                  required\r\n                  placeholder=\"Correo Institucional\"\r\n                />\r\n              </div>\r\n\r\n              <input type=\"submit\" value=\"Enviar Código\" class=\"sign-btn\" id=\"enviar-codigo-btn\" />\r\n\r\n              <div id=\"codigo-verification\" style=\"display: none;\">\r\n                <div class=\"input-wrap\">\r\n                  <input\r\n                    type=\"text\"\r\n                    id=\"codigo-verificacion\"\r\n                    class=\"input-field\"\r\n                    autocomplete=\"off\"\r\n                    required\r\n                    placeholder=\"Código de 4 dígitos\"\r\n                  />\r\n                </div>\r\n                <input type=\"submit\" value=\"Verificar Código\" class=\"sign-btn\" id=\"verificar-codigo-btn\" />\r\n              </div>\r\n\r\n              <div id=\"nueva-password\" style=\"display: none;\">\r\n                <div class=\"input-wrap\">\r\n                  <input\r\n                    type=\"password\"\r\n                    id=\"new-password\"\r\n                    class=\"input-field\"\r\n                    autocomplete=\"off\"\r\n                    required\r\n                    placeholder=\"Nueva Contraseña\"\r\n                  />\r\n                </div>\r\n                <div class=\"input-wrap\">\r\n                  <input\r\n                    type=\"password\"\r\n                    id=\"confirm-password\"\r\n                    class=\"input-field\"\r\n                    autocomplete=\"off\"\r\n                    required\r\n                    placeholder=\"Confirmar Contraseña\"\r\n                  />\r\n                </div>\r\n                <input type=\"submit\" value=\"Cambiar Contraseña\" class=\"sign-btn\" id=\"cambiar-password-btn\" />\r\n              </div>\r\n            </div>\r\n          </form>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </main>\r\n\r\n  <script src=\"/js/script.js\"></script>\r\n</body>\r\n</html>",
      "register.html": "<!DOCTYPE html>\r\n<html lang=\"en\">\r\n<head>\r\n    <meta charset=\"UTF-8\">\r\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n    <link rel=\"stylesheet\" href=\"/css/style.css\">\r\n    <link rel=\"stylesheet\" href=\"/css/nav.css\">\r\n    <link rel=\"stylesheet\" href=\"https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.7.0/animate.min.css\">\r\n    <link href=\"https://fonts.googleapis.com/css?family=Quicksand\" rel=\"stylesheet\">\r\n    <link rel=\"stylesheet\" href=\"https://use.fontawesome.com/releases/v5.8.1/css/all.css\" integrity=\"sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf\" crossorigin=\"anonymous\">\r\n    <title>Registrarse</title>\r\n</head>\r\n<body>\r\n  <nav class=\"navbar\">\r\n    <div class=\"container\">\r\n      <a class=\"navbar-brand\" href=\"#\">Patentes Duoc <scan>UC</scan></a>\r\n      <button class=\"navbar-toggler\" id=\"navbar-toggler\">\r\n        <span class=\"navbar-toggler-icon\"></span>\r\n        <span class=\"navbar-toggler-icon\"></span>\r\n        <span class=\"navbar-toggler-icon\"></span>\r\n      </button>\r\n      <ul class=\"navbar-nav\" id=\"navbar-nav\">\r\n        <li class=\"nav-item\">\r\n          <a class=\"nav-link\" href=\"index.html\" id=\"comics-link\">Buscar por patente</a>\r\n        </li>\r\n        <li class=\"nav-item\">\r\n          <a class=\"nav-link\" href=\"login.html\" id=\"login-link\"><i class='bx bx-user'></i> Iniciar sesión</a>\r\n        </li>\r\n        <li class=\"nav-item\">\r\n          <a class=\"nav-link\" href=\"register.html\" id=\"registro-link\"><i class='bx bx-user-plus'></i> Registrarse</a>\r\n        </li>\r\n        <li class=\"nav-item\" id=\"user-info\" style=\"display: none;\">\r\n          <span class=\"nav-link\">Bienvenido, <span id=\"username-display\"></span></span>\r\n        </li>\r\n        <li class=\"nav-item\" id=\"logout-link\" style=\"display: none;\">\r\n          <a class=\"nav-link\" href=\"index.html\" onclick=\"logout()\"><i class='bx bx-log-out'></i> Cerrar sesión</a>\r\n        </li>\r\n      </ul>\r\n    </div>\r\n  </nav>\r\n\r\n  <main>\r\n    <div class=\"box\">\r\n      <div class=\"inner-box\">\r\n        <div class=\"forms-wrap\">\r\n          <form action=\"index.html\" autocomplete=\"off\" class=\"register-in-form\">\r\n            <div class=\"logo\">\r\n              <h4>Duoc <scan>UC</scan></h4>\r\n            </div>\r\n\r\n            <div class=\"heading\">\r\n              <h2>Regístrate</h2>\r\n              <h6>¿Ya estás registrado?</h6>\r\n              <a href=\"../html/login.html\" class=\"toggle\">Inicia sesión</a>\r\n            </div>\r\n            <div class=\"actual-form\">\r\n              <div class=\"input-wrap\">\r\n                <input\r\n                  type=\"text\"\r\n                  id=\"register-nombre\"\r\n                  minlength=\"4\"\r\n                  class=\"input-field\"\r\n                  autocomplete=\"off\"\r\n                  required\r\n                  placeholder=\"Nombre\"\r\n                />\r\n              </div>\r\n\r\n              <div class=\"input-wrap\">\r\n                <input\r\n                  type=\"text\"\r\n                  id=\"register-email\"\r\n                  minlength=\"4\"\r\n                  class=\"input-field\"\r\n                  autocomplete=\"off\"\r\n                  required\r\n                  placeholder=\"Correo institucional\"\r\n                />\r\n              </div>\r\n\r\n              <div class=\"input-wrap\">\r\n                <input\r\n                  type=\"password\"\r\n                  id=\"register-password\"\r\n                  minlength=\"4\"\r\n                  class=\"input-field\"\r\n                  autocomplete=\"off\"\r\n                  required\r\n                  placeholder=\"Contraseña\"\r\n                />\r\n              </div>\r\n              <div id=\"mensaje\" class=\"mensaje\" style=\"display: none;\"></div>\r\n              <div class=\"input-wrap\">\r\n                <input\r\n                  type=\"text\"\r\n                  id=\"register-patente\"\r\n                  minlength=\"4\"\r\n                  class=\"input-field\"\r\n                  autocomplete=\"off\"\r\n                  required\r\n                  placeholder=\"Número Patente (BBBB10)\"\r\n                  oninput=\"this.value = this.value.toUpperCase()\"\r\n                />\r\n              </div>\r\n\r\n              <div class=\"input-wrap\">\r\n                <input\r\n                  type=\"number\"\r\n                  id=\"register-telefono\"\r\n                  minlength=\"9\"\r\n                  class=\"input-field\"\r\n                  autocomplete=\"off\"\r\n                  required\r\n                  placeholder=\"Número telefónico\"\r\n                />\r\n              </div>\r\n\r\n              <input type=\"submit\" value=\"Registrarse\" class=\"sign-btn\" />\r\n\r\n            </div>\r\n          </form>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </main>\r\n\r\n  <script src=\"/js/script.js\"></script>\r\n</body>\r\n</html>\r\n  "
    },
    "js": {
      "script.js": "const BASE_URL = 'http://localhost:3456';\r\nconst APP_URL = '/src/html/'; \r\n\r\n// Funciones de utilidad\r\nconst $ = (selector) => document.querySelector(selector);\r\nconst $$ = (selector) => document.querySelectorAll(selector);\r\nconst validarPatente = (patente) => /^[A-Z]{2}\\d{4}$|^[A-Z]{4}\\d{2}$/.test(patente);\r\n\r\n// Gestión del estado de la aplicación\r\nconst AppState = {\r\n  usuario: JSON.parse(localStorage.getItem('usuarioLogueado')) || null,\r\n  ultimaBusqueda: JSON.parse(localStorage.getItem('ultimaBusqueda')) || null,\r\n  setUsuario(usuario) {\r\n    this.usuario = usuario;\r\n    localStorage.setItem('usuarioLogueado', JSON.stringify(usuario));\r\n    this.actualizarUI();\r\n  },\r\n  setUltimaBusqueda(busqueda) {\r\n    this.ultimaBusqueda = busqueda;\r\n    localStorage.setItem('ultimaBusqueda', JSON.stringify(busqueda));\r\n  },\r\n  logout() {\r\n    this.usuario = null;\r\n    localStorage.removeItem('usuarioLogueado');\r\n    this.limpiarResultadosBusqueda();\r\n    this.actualizarUI();\r\n    localStorage.setItem('mensajeLogout', 'Sesión cerrada exitosamente');\r\n    window.location.href = `${APP_URL}/index.html`;\r\n  },\r\n  actualizarUI() {\r\n    updateNavBar();\r\n    toggleSearchFormVisibility();\r\n    mostrarUltimaBusqueda();\r\n  },\r\n  limpiarResultadosBusqueda() {\r\n    this.ultimaBusqueda = null;\r\n    localStorage.removeItem('ultimaBusqueda');\r\n    const searchResults = $('#search-results');\r\n    if (searchResults) {\r\n      searchResults.innerHTML = '';\r\n      searchResults.style.display = 'none';\r\n    }\r\n  }\r\n};\r\n\r\n// Inicialización de la aplicación\r\ndocument.addEventListener('DOMContentLoaded', () => {\r\n  console.log('DOM cargado, inicializando aplicación');\r\n  AppState.actualizarUI();\r\n  setupEventListeners();\r\n\r\n  // Verificar si hay mensajes pendientes\r\n  const mensajeLogin = localStorage.getItem('mensajeLogin');\r\n  if (mensajeLogin) {\r\n    mostrarMensaje(mensajeLogin, 'success');\r\n    localStorage.removeItem('mensajeLogin');\r\n  }\r\n\r\n  const mensajeRegistro = localStorage.getItem('mensajeRegistro');\r\n  if (mensajeRegistro) {\r\n    mostrarMensaje(mensajeRegistro, 'success');\r\n    localStorage.removeItem('mensajeRegistro');\r\n  }\r\n\r\n  const mensajeLogout = localStorage.getItem('mensajeLogout');\r\n  if (mensajeLogout) {\r\n    mostrarMensaje(mensajeLogout, 'success');\r\n    localStorage.removeItem('mensajeLogout');\r\n  }\r\n  const recuperarForm = $('.recuperar-password-form');\r\n  if (recuperarForm) {\r\n    $('#enviar-codigo-btn').addEventListener('click', enviarCodigoVerificacion);\r\n    $('#verificar-codigo-btn').addEventListener('click', verificarCodigo);\r\n    $('#cambiar-password-btn').addEventListener('click', cambiarPassword);\r\n  }\r\n});\r\n\r\n\r\nfunction setupEventListeners() {\r\n  console.log('Configurando event listeners');\r\n  $('#navbar-toggler')?.addEventListener('click', toggleNavbar);\r\n  $('.sign-in-form')?.addEventListener('submit', handleLogin);\r\n  $('.register-in-form')?.addEventListener('submit', handleRegister);\r\n  $('.search-form')?.addEventListener('submit', handleSearch);\r\n  $('#logout-link')?.addEventListener('click', (e) => {\r\n    e.preventDefault();\r\n    AppState.logout();\r\n  });\r\n}\r\n\r\nfunction updateNavBar() {\r\n  const isLoggedIn = !!AppState.usuario;\r\n  const elements = {\r\n    userInfo: $('#user-info'),\r\n    usernameDisplay: $('#username-display'),\r\n    loginLink: $('#login-link'),\r\n    registroLink: $('#registro-link'),\r\n    logoutLink: $('#logout-link'),\r\n    searchWrap: $('.search-wrap')\r\n  };\r\n\r\n  Object.entries(elements).forEach(([key, element]) => {\r\n    if (element) {\r\n      switch (key) {\r\n        case 'userInfo':\r\n          element.style.display = isLoggedIn ? 'block' : 'none';\r\n          break;\r\n        case 'usernameDisplay':\r\n          if (isLoggedIn) element.textContent = AppState.usuario.nombre;\r\n          break;\r\n        case 'loginLink':\r\n        case 'registroLink':\r\n          element.style.display = isLoggedIn ? 'none' : 'block';\r\n          break;\r\n        case 'logoutLink':\r\n          element.style.display = isLoggedIn ? 'block' : 'none';\r\n          break;\r\n        case 'searchWrap':\r\n          element.style.display = 'block'; // Siempre visible\r\n          break;\r\n      }\r\n    }\r\n  });\r\n}\r\n\r\nfunction toggleNavbar() {\r\n  $('#navbar-nav')?.classList.toggle('active');\r\n}\r\n\r\nfunction toggleSearchFormVisibility() {\r\n  const searchForm = $('.search-form');\r\n  const notLoggedInMessage = $('#not-logged-in-message');\r\n  if (searchForm) {\r\n    const isLoggedIn = !!AppState.usuario;\r\n    searchForm.style.display = 'block'; // Siempre visible\r\n    if (notLoggedInMessage) {\r\n      notLoggedInMessage.style.display = isLoggedIn ? 'none' : 'block';\r\n    }\r\n  }\r\n}\r\n\r\nfunction mostrarMensaje(mensaje, tipo) {\r\n  const mensajeElement = document.createElement('div');\r\n  mensajeElement.textContent = mensaje;\r\n  mensajeElement.className = `mensaje ${tipo}`;\r\n  document.body.appendChild(mensajeElement);\r\n\r\n  // Estilo para el mensaje\r\n  mensajeElement.style.position = 'fixed';\r\n  mensajeElement.style.top = '20px';\r\n  mensajeElement.style.left = '50%';\r\n  mensajeElement.style.transform = 'translateX(-50%)';\r\n  mensajeElement.style.padding = '10px';\r\n  mensajeElement.style.borderRadius = '5px';\r\n  mensajeElement.style.backgroundColor = tipo === 'success' ? '#4CAF50' : '#f44336';\r\n  mensajeElement.style.color = 'white';\r\n  mensajeElement.style.zIndex = '1000';\r\n\r\n  // Desaparecer después de 5 segundos\r\n  setTimeout(() => {\r\n    mensajeElement.style.transition = 'opacity 1s';\r\n    mensajeElement.style.opacity = '0';\r\n    setTimeout(() => {\r\n      document.body.removeChild(mensajeElement);\r\n    }, 1000);\r\n  }, 5000);\r\n}\r\n\r\nfunction mostrarUltimaBusqueda() {\r\n  if (AppState.ultimaBusqueda) {\r\n    const searchResults = $('#search-results');\r\n    if (searchResults) {\r\n      searchResults.innerHTML = AppState.ultimaBusqueda.html;\r\n      searchResults.style.display = 'block';\r\n    }\r\n  }\r\n}\r\n\r\nasync function handleLogin(e) {\r\n  e.preventDefault();\r\n  const correoInstitucional = $('#login-email').value;\r\n  const contraseña = $('#login-password').value;\r\n  try {\r\n    const response = await fetch(`${BASE_URL}/login`, {\r\n      method: 'POST',\r\n      headers: { 'Content-Type': 'application/json' },\r\n      body: JSON.stringify({ correoInstitucional, contraseña })\r\n    });\r\n    const data = await response.json();\r\n    if (response.ok) {\r\n      AppState.setUsuario({\r\n        nombre: data.usuario.nombre,\r\n        correoInstitucional: data.usuario.correoInstitucional,\r\n        token: data.token\r\n      });\r\n      localStorage.setItem('mensajeLogin', 'Inicio de sesión exitoso');\r\n      window.location.href = `${APP_URL}/index.html`;\r\n    } else {\r\n      mostrarMensaje(data.message || 'Error en el inicio de sesión', 'error');\r\n    }\r\n  } catch (error) {\r\n    mostrarMensaje('Error en el inicio de sesión: ' + error.message, 'error');\r\n  }\r\n}\r\n\r\nasync function handleRegister(e) {\r\n  e.preventDefault();\r\n  console.log('Iniciando proceso de registro');\r\n\r\n  const nombre = $('#register-nombre').value.trim();\r\n  const correoInstitucional = $('#register-email').value.trim();\r\n  const contraseña = $('#register-password').value;\r\n  const numeroPatente = $('#register-patente').value.trim().toUpperCase();\r\n  const numeroTelefono = $('#register-telefono').value.trim();\r\n\r\n  console.log('Datos a enviar:', { nombre, correoInstitucional, numeroPatente, numeroTelefono });\r\n\r\n  if (!validarPatente(numeroPatente)) {\r\n    console.log('Patente inválida');\r\n    mostrarMensaje('Formato de patente inválido. Use AA1000 o BBBB10.', 'error');\r\n    return;\r\n  }\r\n\r\n  try {\r\n    console.log('Enviando solicitud al servidor');\r\n    const response = await fetch(`${BASE_URL}/usuarios`, {\r\n      method: 'POST',\r\n      headers: { 'Content-Type': 'application/json' },\r\n      body: JSON.stringify({ nombre, correoInstitucional, contraseña, numeroPatente, numeroTelefono })\r\n    });\r\n\r\n    const data = await response.json();\r\n    console.log('Respuesta del servidor:', data);\r\n    \r\n    if (response.ok) {\r\n      console.log('Registro exitoso, preparando para iniciar sesión automáticamente');\r\n      localStorage.setItem('mensajeRegistro', 'Registro exitoso. Sesión iniciada automáticamente.');\r\n      console.log('Iniciando sesión automáticamente');\r\n      await autoLogin(correoInstitucional, contraseña);\r\n    } else {\r\n      const errorMessage = data.errors ? data.errors.map(err => err.msg).join(', ') : data.error || 'Error desconocido';\r\n      console.error('Error en el registro:', errorMessage);\r\n      mostrarMensaje(`Error en el registro: ${errorMessage}`, 'error');\r\n    }\r\n  } catch (error) {\r\n    console.error('Error completo:', error);\r\n    mostrarMensaje('Error en el registro: ' + error.message, 'error');\r\n  }\r\n}\r\n\r\nasync function autoLogin(correoInstitucional, contraseña) {\r\n  console.log('Iniciando auto-login');\r\n  try {\r\n    console.log('Enviando solicitud de login');\r\n    const response = await fetch(`${BASE_URL}/login`, {\r\n      method: 'POST',\r\n      headers: { 'Content-Type': 'application/json' },\r\n      body: JSON.stringify({ correoInstitucional, contraseña })\r\n    });\r\n    const data = await response.json();\r\n    console.log('Respuesta del servidor de login:', data);\r\n    \r\n    if (response.ok) {\r\n      console.log('Login exitoso, actualizando AppState');\r\n      AppState.setUsuario({\r\n        nombre: data.usuario.nombre,\r\n        correoInstitucional: data.usuario.correoInstitucional,\r\n        token: data.token\r\n      });\r\n      console.log('AppState actualizado');\r\n      \r\n      console.log('Preparando redirección');\r\n      window.location.href = `${APP_URL}/index.html`;\r\n    } else {\r\n      throw new Error(data.message || 'Error en el inicio de sesión automático');\r\n    }\r\n  } catch (error) {\r\n    console.error('Error en el inicio de sesión automático:', error);\r\n    localStorage.setItem('mensajeRegistro', 'Error en el inicio de sesión automático. Por favor, intenta iniciar sesión manualmente.');\r\n    window.location.href = `${APP_URL}/index.html`;\r\n  }\r\n}\r\n\r\nasync function handleSearch(e) {\r\n  e.preventDefault();\r\n  const numeroPatente = $('#patente-input').value.trim().toUpperCase();\r\n  if (!validarPatente(numeroPatente)) {\r\n    mostrarMensaje('Formato de patente inválido. Use AA1000 o BBBB10.', 'error');\r\n    return;\r\n  }\r\n  if (!AppState.usuario) {\r\n    mostrarMensaje('Debe iniciar sesión para buscar por patente.', 'error');\r\n    return;\r\n  }\r\n  await buscarPorPatente(numeroPatente);\r\n}\r\n\r\nasync function buscarPorPatente(numeroPatente) {\r\n  const searchResults = $('#search-results');\r\n  try {\r\n    const headers = {\r\n      'Content-Type': 'application/json',\r\n      'Authorization': `Bearer ${AppState.usuario.token}`\r\n    };\r\n    const response = await fetch(`${BASE_URL}/buscarPorPatente/${numeroPatente}`, {\r\n      headers: headers\r\n    });\r\n    let resultadoHTML;\r\n    if (response.status === 404) {\r\n      resultadoHTML = '<p>Patente aún no registrada</p>';\r\n    } else if (response.ok) {\r\n      const usuarioEncontrado = await response.json();\r\n      if (usuarioEncontrado && usuarioEncontrado.nombre) {\r\n        resultadoHTML = `\r\n          <p>Nombre: ${usuarioEncontrado.nombre}</p>\r\n          <p>Número de Teléfono: ${usuarioEncontrado.numeroTelefono}</p>\r\n          <p>Patente: ${usuarioEncontrado.numeroPatente}</p>\r\n        `;\r\n        await registrarConsulta(AppState.usuario.correoInstitucional, numeroPatente);\r\n      } else {\r\n        resultadoHTML = `<p>No se encontró información para la patente ${numeroPatente}</p>`;\r\n      }\r\n    } else {\r\n      throw new Error(`Error en la respuesta del servidor: ${response.status}`);\r\n    }\r\n    searchResults.innerHTML = resultadoHTML;\r\n    searchResults.style.display = 'block';\r\n    AppState.setUltimaBusqueda({ html: resultadoHTML, patente: numeroPatente });\r\n  } catch (error) {\r\n    searchResults.innerHTML = `<p>Error: ${error.message}</p>`;\r\n    AppState.setUltimaBusqueda({ html: searchResults.innerHTML, patente: numeroPatente });\r\n  }\r\n  console.log('Búsqueda completada, resultados mostrados');\r\n}\r\n\r\nasync function registrarConsulta(correoUsuario, numeroPatente) {\r\n  try {\r\n    const headers = {\r\n      'Content-Type': 'application/json',\r\n      'Authorization': `Bearer ${AppState.usuario.token}`\r\n    };\r\n    const response = await fetch(`${BASE_URL}/consultasRegistradas`, {\r\n      method: 'POST',\r\n      headers: headers,\r\n      body: JSON.stringify({ correoUsuario, numeroPatente })\r\n    });\r\n    if (!response.ok) {\r\n      throw new Error('Error al registrar la consulta');\r\n    }\r\n    console.log('Consulta registrada exitosamente');\r\n  } catch (error) {\r\n    console.error('Error al registrar la consulta:', error);\r\n  }\r\n}\r\n\r\n// Variables globales para el proceso de recuperación de contraseña\r\nlet codigoVerificacion = null;\r\nlet correoRecuperacion = null;\r\n\r\n// Función para enviar el código de verificación\r\nasync function enviarCodigoVerificacion(e) {\r\n  e.preventDefault();\r\n  correoRecuperacion = $('#recuperar-email').value;\r\n  \r\n  console.log('Intentando enviar código a:', correoRecuperacion);\r\n  \r\n  try {\r\n    const response = await fetch(`${BASE_URL}/enviar-codigo`, {\r\n      method: 'POST',\r\n      headers: { 'Content-Type': 'application/json' },\r\n      body: JSON.stringify({ correoInstitucional: correoRecuperacion })\r\n    });\r\n    \r\n    console.log('Respuesta recibida:', response.status);\r\n    \r\n    const data = await response.json();\r\n    console.log('Datos de respuesta:', data);\r\n    \r\n    if (response.ok) {\r\n      mostrarMensaje('Código enviado. Revisa tu correo.', 'success');\r\n      $('#codigo-verification').style.display = 'block';\r\n      $('#enviar-codigo-btn').style.display = 'none';\r\n    } else {\r\n      mostrarMensaje(data.message || 'Error al enviar el código', 'error');\r\n    }\r\n  } catch (error) {\r\n    console.error('Error completo:', error);\r\n    mostrarMensaje('Error al enviar el código: ' + error.message, 'error');\r\n  }\r\n}\r\n\r\n// Función para verificar el código\r\nasync function verificarCodigo(e) {\r\n  e.preventDefault();\r\n  const codigoIngresado = $('#codigo-verificacion').value;\r\n  \r\n  console.log('Verificando código:', codigoIngresado);\r\n\r\n  try {\r\n    const response = await fetch(`${BASE_URL}/verificar-codigo`, {\r\n      method: 'POST',\r\n      headers: { 'Content-Type': 'application/json' },\r\n      body: JSON.stringify({ \r\n        correoInstitucional: correoRecuperacion,\r\n        codigo: codigoIngresado\r\n      })\r\n    });\r\n    \r\n    console.log('Respuesta recibida:', response.status);\r\n    \r\n    const data = await response.json();\r\n    console.log('Datos de respuesta:', data);\r\n    \r\n    if (response.ok) {\r\n      mostrarMensaje('Código verificado correctamente', 'success');\r\n      $('#nueva-password').style.display = 'block';\r\n      $('#codigo-verification').style.display = 'none';\r\n    } else {\r\n      mostrarMensaje(data.message || 'Código incorrecto', 'error');\r\n    }\r\n  } catch (error) {\r\n    console.error('Error completo:', error);\r\n    mostrarMensaje('Error al verificar el código: ' + error.message, 'error');\r\n  }\r\n}\r\n\r\nasync function cambiarPassword(e) {\r\n  e.preventDefault();\r\n  const nuevaPassword = $('#new-password').value;\r\n  const confirmarPassword = $('#confirm-password').value;\r\n  \r\n  if (nuevaPassword !== confirmarPassword) {\r\n    mostrarMensaje('Las contraseñas no coinciden', 'error');\r\n    return;\r\n  }\r\n  \r\n  console.log('Intentando cambiar contraseña para:', correoRecuperacion);\r\n\r\n  try {\r\n    const response = await fetch(`${BASE_URL}/cambiar-password`, {\r\n      method: 'POST',\r\n      headers: { 'Content-Type': 'application/json' },\r\n      body: JSON.stringify({ \r\n        correoInstitucional: correoRecuperacion,\r\n        nuevaPassword: nuevaPassword\r\n      })\r\n    });\r\n    \r\n    console.log('Respuesta recibida:', response.status);\r\n    \r\n    const data = await response.json();\r\n    console.log('Datos de respuesta:', data);\r\n    \r\n    if (response.ok) {\r\n      mostrarMensaje('Contraseña cambiada exitosamente', 'success');\r\n      setTimeout(() => {\r\n        window.location.href = `${APP_URL}/login.html`;\r\n      }, 2000);\r\n    } else {\r\n      mostrarMensaje(data.message || 'Error al cambiar la contraseña', 'error');\r\n    }\r\n  } catch (error) {\r\n    console.error('Error completo:', error);\r\n    mostrarMensaje('Error al cambiar la contraseña: ' + error.message, 'error');\r\n  }\r\n}\r\n\r\n// Función para cambiar la contraseña\r\nasync function cambiarPassword(e) {\r\n  e.preventDefault();\r\n  const nuevaPassword = $('#new-password').value;\r\n  const confirmarPassword = $('#confirm-password').value;\r\n  \r\n  if (nuevaPassword !== confirmarPassword) {\r\n    mostrarMensaje('Las contraseñas no coinciden', 'error');\r\n    return;\r\n  }\r\n  \r\n  try {\r\n    const response = await fetch(`${BASE_URL}/cambiar-password`, {\r\n      method: 'POST',\r\n      headers: { 'Content-Type': 'application/json' },\r\n      body: JSON.stringify({ \r\n        correoInstitucional: correoRecuperacion,\r\n        nuevaPassword: nuevaPassword\r\n      })\r\n    });\r\n    \r\n    const data = await response.json();\r\n    if (response.ok) {\r\n      mostrarMensaje('Contraseña cambiada exitosamente', 'success');\r\n      setTimeout(() => {\r\n        window.location.href = `${APP_URL}/login.html`;\r\n      }, 2000);\r\n    } else {\r\n      mostrarMensaje(data.message || 'Error al cambiar la contraseña', 'error');\r\n    }\r\n  } catch (error) {\r\n    mostrarMensaje('Error al cambiar la contraseña: ' + error.message, 'error');\r\n  }\r\n}\r\n"
    }
  }
}